import { OpenMeteoService } from "../openmeteo/open-meteo.service";
import type { IrrigationScheduleRequest } from "./models";
import { LLM } from "./openai.provider";

const jsonForEvo = {
	CDD10_SUM: 0,
	CDD18_SUM: 0,
	CDH23_SUM: 0,
	CDH26_SUM: 0,
	CM: 8,
	DB_004: -50,
	DB_010: -48.4,
	DB_980: -15,
	DB_990: -13.8,
	DB_996: -12.6,
	DB_AVG: -31.4,
	DB_MAX_AVG: -10.5,
	DB_MAX_STD: 1.3,
	DB_MIN_AVG: -51.9,
	DB_MIN_STD: 2,
	DB_RANGE: 6.3,
	DB_STD: 8.35,
	DP_004: -50.3,
	DP_010: -48.7,
	DP_980: -16.9,
	DP_990: -15.7,
	DP_996: -14.5,
	EN_980: -12.3,
	EN_990: -10.8,
	EN_996: -9.2,
	EXT_WS_010: 14.1,
	EXT_WS_025: 12.5,
	EXT_WS_050: 11.4,
	HDD10_SUM: 15120.2,
	HDD18_SUM: 18151.8,
	MCDB_004: -48.6,
	MCDB_010: -46.5,
	MCDB_CM_990: -36.3,
	MCDB_CM_996: -25,
	MCDB_DP_980: -15.2,
	MCDB_DP_990: -14.1,
	MCDB_DP_996: -12.9,
	MCDB_EN_980: -15,
	MCDB_EN_990: -13.8,
	MCDB_EN_996: -12.7,
	MCDB_WB_980: -15.1,
	MCDB_WB_990: -13.9,
	MCDB_WB_996: -12.8,
	MCHR_004: 0.1,
	MCHR_010: 0.1,
	MCHR_DP_980: 1.2,
	MCHR_DP_990: 1.3,
	MCHR_DP_996: 1.5,
	MCWB_980: -16,
	MCWB_990: -14.8,
	MCWB_996: -13.7,
	MCWD_004: 145,
	MCWD_DB_996: 107.6,
	MCWS_004: 6.7,
	MCWS_DB_996: 6.2,
	PRECTOTCORR_ANNUAL_MAX: 190.3,
	PRECTOTCORR_ANNUAL_MIN: 89.1,
	PRECTOTCORR_ANNUAL_STD: 23.6,
	PRECTOTCORR_SUM: 121.7,
	T2MWET_MAX_VALUE: -9.6,
	WB_980: -16,
	WB_990: -14.8,
	WB_996: -13.6,
	WB_MAX_AVG: -11.6,
	WB_MAX_STD: 1.3,
	WB_MIN_AVG: -51.6,
	WB_MIN_STD: 1.9,
	WM: 1,
	WS10M_ANNUAL: 6.1,
	WS_CM_990: 14.1,
	WS_CM_996: 15.7,
	CDD10: {
		"1": 0,
		"2": 0,
		"3": 0,
		"4": 0,
		"5": 0,
		"6": 0,
		"7": 0,
		"8": 0,
		"9": 0,
		"10": 0,
		"11": 0,
		"12": 0,
	},
	CDD18: {
		"1": 0,
		"2": 0,
		"3": 0,
		"4": 0,
		"5": 0,
		"6": 0,
		"7": 0,
		"8": 0,
		"9": 0,
		"10": 0,
		"11": 0,
		"12": 0,
	},
	CDH23: {
		"1": 0,
		"2": 0,
		"3": 0,
		"4": 0,
		"5": 0,
		"6": 0,
		"7": 0,
		"8": 0,
		"9": 0,
		"10": 0,
		"11": 0,
		"12": 0,
	},
	CDH26: {
		"1": 0,
		"2": 0,
		"3": 0,
		"4": 0,
		"5": 0,
		"6": 0,
		"7": 0,
		"8": 0,
		"9": 0,
		"10": 0,
		"11": 0,
		"12": 0,
	},
	CLRSKY_SFC_SW_DIFF_NOON_HOUR: {
		"1": 76.3,
		"2": 63.5,
		"3": 42.7,
		"4": 13.1,
		"5": 0,
		"6": 0,
		"7": 6.860531182228405e35,
		"8": 4.8,
		"9": 33.4,
		"10": 56.5,
		"11": 72.4,
		"12": 79.3,
	},
	CLRSKY_SFC_SW_DNI_NOON_HOUR: {
		"1": 1116.5,
		"2": 1075.7,
		"3": 954.5,
		"4": 521.6,
		"5": 0,
		"6": 0,
		"7": 1.1204097682703245e52,
		"8": 270.4,
		"9": 881.8,
		"10": 1050.4,
		"11": 1113,
		"12": 1130.2,
	},
	DB_RANGE_MONTH: {
		"1": 6.3,
		"2": 7.1,
		"3": 5.6,
		"4": 5.4,
		"5": 5.3,
		"6": 5.8,
		"7": 5.5,
		"8": 5.8,
		"9": 5.9,
		"10": 6.9,
		"11": 7.1,
		"12": 6.4,
	},
	DB_TEMP_900: {
		"1": -14.6,
		"2": -19.3,
		"3": -23.6,
		"4": -25.9,
		"5": -28.1,
		"6": -29.1,
		"7": -31.9,
		"8": -30.9,
		"9": -29.7,
		"10": -25,
		"11": -19.5,
		"12": -15.2,
	},
	DB_TEMP_950: {
		"1": -13.3,
		"2": -18,
		"3": -21.6,
		"4": -23.4,
		"5": -25.1,
		"6": -26.3,
		"7": -29.6,
		"8": -28.2,
		"9": -26.4,
		"10": -23.2,
		"11": -17.8,
		"12": -14.1,
	},
	DB_TEMP_980: {
		"1": -11.9,
		"2": -16.2,
		"3": -19.1,
		"4": -20.8,
		"5": -22,
		"6": -23.7,
		"7": -26.9,
		"8": -24.7,
		"9": -23.5,
		"10": -21.4,
		"11": -16.4,
		"12": -12.9,
	},
	DB_TEMP_996: {
		"1": -10.3,
		"2": -13.5,
		"3": -15.6,
		"4": -18.3,
		"5": -18.3,
		"6": -21,
		"7": -22.9,
		"8": -21.4,
		"9": -19.6,
		"10": -19.4,
		"11": -14.2,
		"12": -11.4,
	},
	HDD10: {
		"1": 914.4,
		"2": 994.9,
		"3": 1244.1,
		"4": 1313.2,
		"5": 1416.8,
		"6": 1425.8,
		"7": 1525,
		"8": 1530.4,
		"9": 1441.3,
		"10": 1322.7,
		"11": 1066,
		"12": 925.5,
	},
	HDD18: {
		"1": 1171.7,
		"2": 1229.3,
		"3": 1501.4,
		"4": 1562.2,
		"5": 1674.1,
		"6": 1674.8,
		"7": 1782.3,
		"8": 1787.7,
		"9": 1690.3,
		"10": 1580,
		"11": 1315,
		"12": 1182.8,
	},
	MCDBR_DB: {
		"1": 6.3,
		"2": 7.1,
		"3": 6,
		"4": 6.5,
		"5": 6.8,
		"6": 7.5,
		"7": 8.2,
		"8": 8.1,
		"9": 7,
		"10": 7.5,
		"11": 7.1,
		"12": 6.4,
	},
	MCDBR_WB: {
		"1": 6.3,
		"2": 7.1,
		"3": 5.9,
		"4": 6.5,
		"5": 6.7,
		"6": 7.4,
		"7": 8,
		"8": 8.1,
		"9": 6.9,
		"10": 7.4,
		"11": 7.1,
		"12": 6.4,
	},
	MCDB_TEMP_900: {
		"1": -14.6,
		"2": -19.3,
		"3": -23.8,
		"4": -26,
		"5": -28.2,
		"6": -29.2,
		"7": -32.1,
		"8": -30.9,
		"9": -29.8,
		"10": -25.1,
		"11": -19.5,
		"12": -15.2,
	},
	MCDB_TEMP_950: {
		"1": -13.4,
		"2": -18.1,
		"3": -21.6,
		"4": -23.4,
		"5": -25.1,
		"6": -26.4,
		"7": -29.6,
		"8": -28.3,
		"9": -26.4,
		"10": -23.3,
		"11": -17.8,
		"12": -14.1,
	},
	MCDB_TEMP_980: {
		"1": -11.9,
		"2": -16.3,
		"3": -19,
		"4": -20.9,
		"5": -22,
		"6": -23.6,
		"7": -26.9,
		"8": -24.9,
		"9": -23.4,
		"10": -21.5,
		"11": -16.6,
		"12": -13,
	},
	MCDB_TEMP_996: {
		"1": -10.3,
		"2": -13.5,
		"3": -15.8,
		"4": -18.3,
		"5": -18.3,
		"6": -21.2,
		"7": -22.5,
		"8": -21.3,
		"9": -19.8,
		"10": -19.6,
		"11": -14.2,
		"12": -11.4,
	},
	MCWBR_DB: {
		"1": 5.8,
		"2": 6.8,
		"3": 5.8,
		"4": 6.3,
		"5": 6.7,
		"6": 7.7,
		"7": 8.1,
		"8": 8.1,
		"9": 6.9,
		"10": 7.2,
		"11": 6.8,
		"12": 5.9,
	},
	MCWBR_WB: {
		"1": 5.8,
		"2": 6.8,
		"3": 5.8,
		"4": 6.2,
		"5": 6.6,
		"6": 7.7,
		"7": 8.1,
		"8": 8.1,
		"9": 6.9,
		"10": 7.3,
		"11": 6.8,
		"12": 5.9,
	},
	MCWB_TEMP_900: {
		"1": -15.6,
		"2": -20,
		"3": -24.4,
		"4": -26.4,
		"5": -28.5,
		"6": -29.7,
		"7": -32.3,
		"8": -31.5,
		"9": -30.3,
		"10": -25.7,
		"11": -20.3,
		"12": -16.2,
	},
	MCWB_TEMP_950: {
		"1": -14.4,
		"2": -18.7,
		"3": -22.3,
		"4": -23.9,
		"5": -25.7,
		"6": -27,
		"7": -30,
		"8": -28.9,
		"9": -27,
		"10": -24,
		"11": -18.6,
		"12": -15.2,
	},
	MCWB_TEMP_980: {
		"1": -12.9,
		"2": -17,
		"3": -19.7,
		"4": -21.4,
		"5": -22.6,
		"6": -24.1,
		"7": -27.5,
		"8": -25.4,
		"9": -24.1,
		"10": -22.3,
		"11": -17.4,
		"12": -14.1,
	},
	MCWB_TEMP_996: {
		"1": -11.6,
		"2": -14,
		"3": -16.6,
		"4": -19.4,
		"5": -18.9,
		"6": -21.7,
		"7": -23.8,
		"8": -21.8,
		"9": -20.2,
		"10": -20.4,
		"11": -15.2,
		"12": -12.4,
	},
	PRECTOTCORR: {
		"1": 10.4,
		"2": 8,
		"3": 12.9,
		"4": 13.5,
		"5": 12.7,
		"6": 10.1,
		"7": 10.2,
		"8": 8.6,
		"9": 8.4,
		"10": 11.1,
		"11": 8.6,
		"12": 7.2,
	},
	PRECTOTCORR_MONTH_MAX: {
		"1": 25.5,
		"2": 19.9,
		"3": 23.6,
		"4": 23.7,
		"5": 23.3,
		"6": 21.2,
		"7": 20.7,
		"8": 17,
		"9": 22.2,
		"10": 18.2,
		"11": 19.6,
		"12": 15.6,
	},
	PRECTOTCORR_MONTH_MIN: {
		"1": 2.1,
		"2": 3.4,
		"3": 6.2,
		"4": 4.6,
		"5": 5,
		"6": 1.9,
		"7": 3.1,
		"8": 3.2,
		"9": 1.9,
		"10": 3.2,
		"11": 1.9,
		"12": 1.7,
	},
	PRECTOTCORR_MONTH_STD: {
		"1": 7,
		"2": 4.6,
		"3": 5.2,
		"4": 5.6,
		"5": 5.6,
		"6": 5.7,
		"7": 4.8,
		"8": 3.4,
		"9": 4.5,
		"10": 4.6,
		"11": 4.2,
		"12": 4.6,
	},
	RADIATION_AVG: {
		"1": 9.19,
		"2": 5.49,
		"3": 1.97,
		"4": 0.21,
		"5": 0,
		"6": 0,
		"7": 0,
		"8": 0.06,
		"9": 1.1,
		"10": 3.83,
		"11": 8.07,
		"12": 10.49,
	},
	RADIATION_STD: {
		"1": 1.12,
		"2": 1.28,
		"3": 0.85,
		"4": 0.21,
		"5": 0,
		"6": 0,
		"7": 0,
		"8": 0.09,
		"9": 0.55,
		"10": 1.15,
		"11": 1.46,
		"12": 0.85,
	},
	T2M_AVG: {
		"1": -19.5,
		"2": -25.2,
		"3": -30.1,
		"4": -33.8,
		"5": -35.7,
		"6": -37.5,
		"7": -39.2,
		"8": -39.4,
		"9": -38,
		"10": -32.7,
		"11": -25.5,
		"12": -19.9,
	},
	T2M_STD: {
		"1": 2.9,
		"2": 3.5,
		"3": 4.4,
		"4": 5.2,
		"5": 5.2,
		"6": 5.3,
		"7": 5,
		"8": 5.6,
		"9": 5.7,
		"10": 4.6,
		"11": 3.7,
		"12": 2.7,
	},
	WB_TEMP_900: {
		"1": -15.5,
		"2": -19.9,
		"3": -24.3,
		"4": -26.3,
		"5": -28.5,
		"6": -29.7,
		"7": -32.2,
		"8": -31.5,
		"9": -30.2,
		"10": -25.7,
		"11": -20.3,
		"12": -16.2,
	},
	WB_TEMP_950: {
		"1": -14.3,
		"2": -18.7,
		"3": -22.3,
		"4": -24,
		"5": -25.6,
		"6": -26.9,
		"7": -30,
		"8": -28.8,
		"9": -27,
		"10": -23.9,
		"11": -18.6,
		"12": -15.1,
	},
	WB_TEMP_980: {
		"1": -12.9,
		"2": -16.9,
		"3": -19.5,
		"4": -21.4,
		"5": -22.5,
		"6": -24.1,
		"7": -27.5,
		"8": -25.3,
		"9": -24.2,
		"10": -22.2,
		"11": -17.3,
		"12": -14,
	},
	WB_TEMP_996: {
		"1": -11.4,
		"2": -14,
		"3": -16.4,
		"4": -19.1,
		"5": -19,
		"6": -21.7,
		"7": -24.1,
		"8": -21.7,
		"9": -20.4,
		"10": -20.3,
		"11": -15.1,
		"12": -12.4,
	},
	WS10M_MONTH: {
		"1": 4.4,
		"2": 5.1,
		"3": 5.6,
		"4": 6.6,
		"5": 6.9,
		"6": 7.3,
		"7": 6.9,
		"8": 7,
		"9": 6.6,
		"10": 6.6,
		"11": 5.6,
		"12": 4.7,
	},
	DB_EXTREME_MAX: {
		"5": -9.6,
		"10": -8.9,
		"20": -8.1,
		"50": -7.2,
	},
	DB_EXTREME_MIN: {
		"5": -53.4,
		"10": -54.5,
		"20": -55.7,
		"50": -57.1,
	},
	WB_EXTREME_MAX: {
		"5": -10.7,
		"10": -10,
		"20": -9.3,
		"50": -8.4,
	},
	WB_EXTREME_MIN: {
		"5": -53,
		"10": -54.1,
		"20": -55.2,
		"50": -56.6,
	},
	metadata: {
		lon: -11.888316,
		lat: -76.4546209,
		elevation: 2136.66,
		timezone: 1,
		pressure: 78.65,
		start: 2001,
		end: 2016,
	},
};
async function testGetIrrigationSchedule() {
	// Create an instance of the LLM class
	const llm = new LLM();

	const mateo = new OpenMeteoService({ lon: -77.0428, lat: -12.0464 });
	const a = await mateo.getElevation();
	console.log(a);

	const evapotranspiration = await llm.getEvapotranspiration(
		JSON.stringify(jsonForEvo),
	);

	console.log("evotranspiracion", evapotranspiration);

	// Define the irrigation schedule request data
	const irrigationScheduleRequest: IrrigationScheduleRequest = {
		location: "Peru", // Example coordinates (New York City)
		area: 10.0, // Area in hectares
		days_since_last_irrigation: 3, // Days since last irrigation
		liters: 5000.0, // Liters used in the last irrigation
		crop_type: "tunas", // Type of crop
		humidity_per_hour: [
			60, 65, 70, 75, 80, 85, 90, 95, 100, 85, 70, 60, 55, 50, 45, 40, 35, 30,
			25, 20, 15, 10, 5, 0,
		], // Hourly humidity data
		temperature_per_hour: [
			15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32,
			33, 34, 35, 34, 33, 32,
		], // Hourly temperature data
		evapotranspiration: evapotranspiration,
	};

	try {
		// Call the getIrrigationSchedule method and get the response
		const scheduleResponse = await llm.getIrrigationSchedule(
			irrigationScheduleRequest,
		);

		// Log the response
		console.log(
			"Irrigation Schedule Response:",
			JSON.stringify(scheduleResponse, null, 2),
		);
	} catch (error) {
		console.error("Error fetching irrigation schedule:", error);
	}
}

// Run the test function
testGetIrrigationSchedule();
